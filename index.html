<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping List</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { width: 95%; border-collapse: collapse; margin-bottom: 20px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        td:nth-child(1) { width: 25%; }
        td:nth-child(2) { width: 15%; }
        td:nth-child(3) { width: 15%; }
        td:nth-child(4) { width: 30%; }
        td:nth-child(5) { width: 10%; }
        .form-group { margin-bottom: 10px; }
        #addItemForm { display: flex; flex-wrap: wrap; gap: 10px; }
        .action-icons i { cursor: pointer; margin-right: 10px; }
        .modal {
            display: none; 
            position: fixed; 
            z-index: 1; 
            left: 0; 
            top: 0; 
            width: 100%; 
            height: 100%; 
            overflow: auto; 
            background-color: rgb(0,0,0); 
            background-color: rgba(0,0,0,0.4); 
            padding-top: 60px; 
        }
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto; 
            padding: 20px;
            border: 1px solid #888;
            width: 80%; 
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Shopping List</h1>
    <table id="shoppingListTable">
        <thead>
            <tr>
                <th>Ingredient</th>
                <th>Amount</th>
                <th>Unit</th>
                <th>Location</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody id="tableBody">
            <!-- Rows will be populated here -->
        </tbody>
    </table>
    <form id="addItemForm">
        <div class="form-group">
            <input type="text" id="ingredient" placeholder="Ingredient" required>
        </div>
        <div class="form-group">
            <input type="number" id="amount" placeholder="Amount" required>
        </div>
        <div class="form-group">
            <input type="text" id="unit" placeholder="Unit">
        </div>
        <div class="form-group">
            <input type="text" id="location" placeholder="Location">
        </div>
        <button type="submit">Add Item</button>
    </form>

    <!-- Modal for editing -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Edit Item</h2>
            <div class="form-group">
                <input type="text" id="editIngredient" placeholder="Ingredient" required>
            </div>
            <div class="form-group">
                <input type="number" id="editAmount" placeholder="Amount" required>
            </div>
            <div class="form-group">
                <input type="text" id="editUnit" placeholder="Unit">
            </div>
            <div class="form-group">
                <input type="text" id="editLocation" placeholder="Location">
            </div>
            <button id="updateButton">Update Item</button>
        </div>
    </div>

    <script>
        const shoppingListData = [];
        let currentEditIndex = -1; // To keep track of the item being edited

        function populateTable() {
            const tableBody = document.querySelector('#tableBody');
            tableBody.innerHTML = '';
            shoppingListData.forEach((row, index) => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${row.ingredient}</td>
                    <td>${row.amount}</td>
                    <td>${row.unit}</td>
                    <td>${row.location}</td>
                    <td class="action-icons">
                        <i class="fas fa-edit" onclick="openEditModal(${index})" title="Edit"></i>
                        <i class="fas fa-trash" onclick="removeItem(${index})" title="Remove"></i>
                    </td>
                `;
                tableBody.appendChild(tr);
            });
            window.scrollTo(0, document.body.scrollHeight);
        }

        function openEditModal(index) {
            currentEditIndex = index; // Save the index of the item being edited
            const item = shoppingListData[index];
            document.getElementById('editIngredient').value = item.ingredient;
            document.getElementById('editAmount').value = item.amount;
            document.getElementById('editUnit').value = item.unit;
            document.getElementById('editLocation').value = item.location;
            document.getElementById('editModal').style.display = 'block'; // Show modal
        }

        function removeItem(index) {
            shoppingListData.splice(index, 1);
            populateTable();
        }

        document.getElementById('addItemForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent the form from submitting normally
            const newItem = {
                ingredient: document.getElementById('ingredient').value,
                amount: document.getElementById('amount').value,
                unit: document.getElementById('unit').value || '',
                location: document.getElementById('location').value || ''
            };
            shoppingListData.push(newItem);
            populateTable(); // Update the table with new data
            this.reset(); // Clear the form fields
        });

        document.querySelector('.close').onclick = function() {
            document.getElementById('editModal').style.display = 'none'; // Hide modal
        }

        document.getElementById('updateButton').onclick = function() {
            const updatedItem = {
                ingredient: document.getElementById('editIngredient').value,
                amount: document.getElementById('editAmount').value,
                unit: document.getElementById('editUnit').value || '',
                location: document.getElementById('editLocation').value || ''
            };
            shoppingListData[currentEditIndex] = updatedItem; // Update the item in the array
            populateTable(); // Refresh the table
            document.getElementById('editModal').style.display = 'none'; // Hide modal
        }

        // Fetch the CSV data when the page loads
        window.onload = function() {
            fetch('shopping_list.csv') // Change to your CSV file path if needed
                .then(response => response.text())
                .then(data => {
                    const rows = data.split('\n');
                    // Start from row 2
                    for (let i = 1; i < rows.length; i++) { // Adjusted to start from row 2
                        if (rows[i]) {
                            const columns = rows[i].split(',');
                            shoppingListData.push({
                                ingredient: columns[0],
                                amount: columns[1],
                                unit: columns[2],
                                location: columns[3]
                            });
                        }
                    }
                    populateTable(); // Populate the table after fetching data
                })
                .catch(error => console.error('Error fetching the CSV file:', error));
        };
    </script>
</body>
</html>


















